(function(t){function e(e){for(var r,s,o=e[0],c=e[1],u=e[2],d=0,h=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},i=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"024a":function(t,e,n){"use strict";n("4f83")},"034f":function(t,e,n){"use strict";n("85ec")},"038d":function(t,e,n){"use strict";n("adf9")},"0622":function(t,e,n){},"0f2a":function(t,e,n){"use strict";n("6cdd")},1:function(t,e){},10:function(t,e){},2:function(t,e){},2023:function(t,e,n){},2100:function(t,e,n){"use strict";n("e271")},2269:function(t,e,n){"use strict";n("57ed")},"2a46":function(t,e,n){"use strict";n("0622")},"2f04":function(t,e,n){"use strict";n("2023")},3:function(t,e){},"31d4":function(t,e,n){},"36f7":function(t,e,n){"use strict";n("cbca")},"3b80":function(t,e,n){},4:function(t,e){},4631:function(t,e,n){},"4f83":function(t,e,n){},5:function(t,e){},5675:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a,i,s,o,c,u,l,d,h,g,p,f,m,b,v,y,w,k,O,j,x,T,A,S,I,$,R,q,P,U,C,B=n("2b0e"),D=n("bf48"),H=n.n(D),F=(n("45fc"),n("8c4f")),z=n("d4ec"),L=n("bee2"),M=n("262e"),K=n("2caf"),E=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(z["a"])(this,n),e.call(this,"Tags")}return Object(L["a"])(n,[{key:"label",get:function(){return this.get("label")},set:function(t){return this.set("label",t)}},{key:"category",get:function(){return this.get("category")},set:function(t){return this.set("category",t)}},{key:"color",get:function(){return this.get("color")}},{key:"submittedBy",set:function(t){return this.set("submittedBy",t)}}]),n}(H.a.Object),Q=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(z["a"])(this,n),e.call(this,"Tagline")}return Object(L["a"])(n,[{key:"tagline",get:function(){return this.get("tagline")}}]),n}(H.a.Object),N=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(z["a"])(this,n),e.call(this,"KeyboardArt")}return Object(L["a"])(n,[{key:"src",get:function(){return this.get("src")}},{key:"name",get:function(){return this.get("name")}},{key:"attribution",get:function(){return this.get("attribution")}},{key:"url",get:function(){return this.get("url")}}]),n}(H.a.Object),_=(n("99af"),n("4de4"),n("2909")),G=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(){var t;return Object(z["a"])(this,n),t=e.call(this,"Products"),t.set("name",""),t.set("tags",[]),t.set("url",""),t.set("images",[]),t}return Object(L["a"])(n,[{key:"addTag",value:function(t){if(this.tags.some((function(e){return t.id===e.id})))throw new Error("Cannot add tag that already is added.");return this.set("tags",[].concat(Object(_["a"])(this.tags),[t]))}},{key:"addTags",value:function(t){var e=this;if(!Array.isArray(t))throw new Error("Not an array.");return this.set("tags",[].concat(Object(_["a"])(this.tags),Object(_["a"])(t.filter((function(t){return!e.tags.some((function(e){return t.id===e.id}))})))))}},{key:"removeTag",value:function(t){var e=this.tags.filter((function(e){return t.id!==e.id}));if(this.tags.length>e)throw new Error("Cannot remove tag not in array.");return this.set("tags",e)}},{key:"removeTags",value:function(t){if(!Array.isArray(t))throw new Error("Not an array.");return this.set("tags",this.tags.filter((function(e){return!t.some((function(t){return e.id===t.id}))})))}},{key:"name",get:function(){return this.get("name")},set:function(t){return this.set("name",t)}},{key:"tags",get:function(){return this.get("tags")},set:function(t){return this.set("tags",t)}},{key:"url",get:function(){return this.get("url")},set:function(t){return this.set("url",t)}},{key:"thumbnail",get:function(){return this.get("thumbnail")},set:function(t){return this.set("thumbnail",t)}},{key:"images",get:function(){return this.get("images")},set:function(t){return this.set("images",t)}},{key:"approved",get:function(){return this.get("approved")},set:function(t){return this.set("approved",t)}},{key:"submittedBy",set:function(t){return this.set("submittedBy",t)}}]),n}(H.a.Object),W=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(){return Object(z["a"])(this,n),e.call(this,"User")}return Object(L["a"])(n,[{key:"register",value:function(t,e){return this.username=t,this.password=e,this.signUp()}},{key:"email",get:function(){return this.get("email")},set:function(t){return this.set("email",t)}},{key:"username",get:function(){return this.get("username")},set:function(t){return this.set("username",t)}},{key:"password",set:function(t){return this.set("password",t)}}]),n}(H.a.User),J=function(t){Object(M["a"])(n,t);var e=Object(K["a"])(n);function n(t){var r;return Object(z["a"])(this,n),r=e.call(this,"Flag"),r.set("flaggedProduct",t),r}return Object(L["a"])(n,[{key:"creator",set:function(t){this.set("creator",t)}},{key:"category",set:function(t){this.set("category",t)}},{key:"reason",set:function(t){this.set("reason",t)}},{key:"tags",set:function(t){this.set("tags",t)}}]),n}(H.a.Object),V=(n("d3b7"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("2b3d"),{sanitizeForSearch:function(t){return t.toLowerCase().replace(/[^0-9a-z%]/g,"")},compress:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return new Promise((function(i,s){try{var o=new Image,c=!1;t instanceof File?(c=!0,o.src=URL.createObjectURL(t)):(o.src=t,o.crossOrigin="Anonymous"),o.onload=function(){var t=document.createElement("canvas"),s=o.width,u=o.height;r&&a&&(r>a?(s=Math.floor(o.width*(a/o.height)),u=a):(s=r,u=Math.floor(o.height*(r/o.width)))),t.width=s,t.height=u;var l=t.getContext("2d");l.drawImage(o,0,0,s,u),t.toBlob((function(t){c&&URL.revokeObjectURL(o.src),i(new File([t],"image.".concat(e)))}),"image/".concat(e),n)}}catch(u){s()}}))},thumbnailify:function(t){return this.compress(t,"webp",.8,200,200)}}),Z=(n("a15b"),n("d81d"),n("13d5"),n("b64b"),n("6062"),n("1276"),n("96cf"),n("1da1")),X=n("5530"),Y=n("2f62"),tt=(n("b0c0"),{name:"Header",data:function(){return{hasLoadedArt:!1}},computed:Object(X["a"])({},Object(Y["c"])({tagline:function(t){return t.tagline},keyboardArtSrc:function(t){return t.keyboardArt.src},keyboardArtName:function(t){return t.keyboardArt.name},keyboardArtAttribution:function(t){return t.keyboardArt.attribution},keyboardArtUrl:function(t){return t.keyboardArt.url}})),methods:{handleHeaderClick:function(){"search"!==this.$route.name?this.$router.push({name:"search"}):this.$emit("click")}},render:function(){var t=this,e=arguments[0];return e("div",{class:"header"},[e("div",{class:"logo",on:{click:this.handleHeaderClick}},["Keebhunter"]),e("div",{class:"tagline"},[this.tagline]),e("img",{class:{"keyboard-art":!0,show:this.hasLoadedArt},on:{load:function(){t.hasLoadedArt=!0}},attrs:{src:this.keyboardArtSrc,title:"".concat(this.keyboardArtName,".\nCredit to ").concat(this.keyboardArtAttribution,", inspired by sealcouch."),alt:"".concat(this.keyboardArtName,".\nCredit to ").concat(this.keyboardArtAttribution,", inspired by sealcouch.")}})])}}),et=tt,nt=(n("6b6d"),n("2877")),rt=Object(nt["a"])(et,r,a,!1,null,"66cde14e",null),at=rt.exports,it=(n("a623"),n("caad"),n("ade3")),st=["small","medium","large","fit"],ot=["","red"],ct={name:"Button",props:{disabled:{type:Boolean,default:!1},label:{type:String,default:""},borderless:{type:Boolean,default:!1},size:{type:String,default:"small",validator:function(t){var e=t.split(" ");return e.every((function(t){return st.includes(t)}))}},color:{type:String,default:"",validator:function(t){return ot.includes(t)}}},render:function(){var t,e=this,n=arguments[0];return n("button",{class:(t={button:!0},Object(it["a"])(t,this.size,!0),Object(it["a"])(t,this.color,!0),Object(it["a"])(t,"borderless",this.borderless),t),on:{click:function(){return e.$emit("click")}},attrs:{disabled:this.disabled}},[this.$slots.default||this.label])}},ut=ct,lt=(n("2a46"),Object(nt["a"])(ut,i,s,!1,null,"d39f88f2",null)),dt=lt.exports,ht={name:"UserState",data:function(){return{username:"",password:"",loading:!1}},computed:Object(X["a"])({},Object(Y["c"])(["loggedIn"])),watch:{loggedIn:{immediate:!0,handler:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loggedIn&&(n=W.current(),t.username=n.get("username"));case 1:case"end":return e.stop()}}),e)})))()}}},created:function(){},methods:{register:function(){var t=this;this.loading||(this.loading=!0,this.$store.dispatch("register",{username:this.username,password:this.password}).catch((function(t){return alert(t.message)})).finally((function(){t.loading=!1,t.password=""})))},login:function(){var t=this;this.loading||(this.loading=!0,this.$store.dispatch("login",{username:this.username,password:this.password}).catch((function(t){return alert(t.message)})).finally((function(){t.loading=!1,t.password=""})))},submit:function(t){t.preventDefault()},logout:function(){var t=this;this.loading||(this.loading=!0,this.$store.dispatch("logout").finally((function(){t.loading=!1,t.password=""})))}},render:function(){var t=this,e=arguments[0];return this.loggedIn?e("div",{class:{"user-container":!0,loading:this.loading}},[e("div",{class:"username"},[this.username]),e(dt,{class:"logout-button",on:{click:this.logout},attrs:{borderless:!0,label:"Logout",size:"fit"}})]):e("form",{class:{"no-user-container":!0,loading:this.loading},on:{submit:this.submit}},[e("input",{class:"username-input",domProps:{value:this.username},on:{input:function(e){t.username=e.target.value}},attrs:{name:"username",autocomplete:"username",type:"text",placeholder:"Username",inputmode:"text",tabIndex:1}}),e("input",{class:"password-input",domProps:{value:this.password},on:{input:function(e){t.password=e.target.value}},attrs:{name:"password",autocomplete:"current-password",type:"password",placeholder:"Password",inputmode:"text",tabIndex:1}}),e(dt,{class:"login-button",on:{click:this.login},attrs:{label:"Login",size:"fit"}}),e(dt,{class:"register-button",on:{click:this.register},attrs:{label:"Register",size:"fit"}})])}},gt=ht,pt=(n("c7a9"),Object(nt["a"])(gt,o,c,!1,null,"5e45928c",null)),ft=pt.exports,mt={name:"AppFrame",render:function(){var t=this,e=arguments[0],n=function(){return e("div",{class:"footer"},[e("div",{class:"footer-user"},[e(ft)]),e("a",{class:"gh-link",attrs:{href:"https://github.com/tuckerchapin/keebhunter",target:"_blank",alt:"Github",title:"Github"}},[e("svg",{class:"gh-logo",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32.58 31.77"}},[e("path",{class:"cls-1",attrs:{d:"M16.29,0a16.29,16.29,0,0,0-5.15,31.75c.82.15,1.11-.36,1.11-.79s0-1.41,0-2.77C7.7,29.18,6.74,26,6.74,26a4.36,4.36,0,0,0-1.81-2.39c-1.47-1,.12-1,.12-1a3.43,3.43,0,0,1,2.49,1.68,3.48,3.48,0,0,0,4.74,1.36,3.46,3.46,0,0,1,1-2.18c-3.62-.41-7.42-1.81-7.42-8a6.3,6.3,0,0,1,1.67-4.37,5.94,5.94,0,0,1,.16-4.31s1.37-.44,4.48,1.67a15.41,15.41,0,0,1,8.16,0c3.11-2.11,4.47-1.67,4.47-1.67A5.91,5.91,0,0,1,25,11.07a6.3,6.3,0,0,1,1.67,4.37c0,6.26-3.81,7.63-7.44,8a3.85,3.85,0,0,1,1.11,3c0,2.18,0,3.94,0,4.47s.29.94,1.12.78A16.29,16.29,0,0,0,16.29,0Z"}})])]),e("a",{class:"email-link",attrs:{href:"mailto:tuckerchapin+keebhunter@gmail.com",target:"_blank",alt:"Contact",title:"Contact"}},[e("svg",{class:"email-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"}},[e("path",{attrs:{d:"m68.184 63.637c-4.1484 5.5195-10.75 9.0898-18.184 9.0898-12.551 0-22.727-10.176-22.727-22.727s10.176-22.727 22.727-22.727c7.4336 0 14.035 3.5703 18.184 9.0898v-9.0898h4.543v36.363c0 5.0078 4.5117 7.8789 9.7812 6.4492 6.3516-1.7266 10.84-8.7539 10.676-20.086 0-23.848-19.336-43.184-43.184-43.184s-43.184 19.336-43.184 43.184 19.336 43.184 43.184 43.184c9.3672 0 18.277-2.9883 25.648-8.4414l2.7031 3.6562c-8.1484 6.0234-18.004 9.3281-28.352 9.3281-26.359 0-47.727-21.367-47.727-47.727s21.367-47.727 47.727-47.727 47.727 21.367 47.727 47.695c0.19531 13.242-5.5195 22.191-14.027 24.504-7.9844 2.168-15.516-2.6211-15.516-10.836zm-18.184 4.5469c10.043 0 18.184-8.1406 18.184-18.184s-8.1406-18.184-18.184-18.184-18.184 8.1406-18.184 18.184 8.1406 18.184 18.184 18.184z"}})])]),e("div",{class:"footer-text"},[e("p",["All images are property of their respective owners. Products listed are user-submited. A listing here is not an endorsement. Group buys are inherently risky. Do your research."]),e("p",["Love with your heart, use your head for everything else."])])])};return e("div",{class:{container:!0,"one-column":!this.$slots.left}},[e(at,{class:"header",on:{click:function(){return t.$emit("click")}}}),e("div",{class:"topbar"},[e("div",{class:"submit-buttons"},[e(dt,{class:{"submit-button":!0,hide:"submit"===this.$route.name},attrs:{label:"Add anything keeb",size:"medium"},on:{click:function(){return t.$router.push({name:"submit"})}}}),e(dt,{class:{"submit-button":!0,hide:"suggest-tag"===this.$route.name},attrs:{label:"Suggest a tag",size:"medium"},on:{click:function(){return t.$router.push({name:"suggest-tag"})}}})])]),e("div",{class:"left"},[this.$slots.left,n()]),e("div",{class:"main"},[this.$slots.default,n()])])}},bt=mt,vt=(n("b37e"),n("038d"),Object(nt["a"])(bt,u,l,!1,null,"16b0cd13",null)),yt=vt.exports,wt={name:"TagBucket",render:function(){var t=arguments[0];return t("div",{class:"tag-bucket"},[this.$slots.default])}},kt=wt,Ot=(n("7050"),Object(nt["a"])(kt,d,h,!1,null,"3dbc57b6",null)),jt=Ot.exports,xt={name:"TagChip",props:{tag:{type:Object,required:!0},selected:{type:Boolean,default:!1},removable:{type:Boolean,default:!1}},render:function(){var t=this,e=arguments[0];return e("span",{class:{tag:!0,selected:this.selected},on:{click:function(e){return t.$emit("click",e)}}},[e("span",{class:{"tag-color":!0,hide:!this.tag.color},style:"background: ".concat(this.tag.color)}),this.tag.label,this.removable?e("span",{class:"remove-icon",on:{click:function(e){e.stopPropagation(),t.$emit("remove")}}},["✕"]):null])}},Tt=xt,At=(n("2269"),Object(nt["a"])(Tt,g,p,!1,null,"093b4038",null)),St=At.exports,It={name:"TagList",props:{selectedTags:{type:Array,required:!0},disabled:{type:Boolean,default:!1}},computed:Object(X["a"])(Object(X["a"])({},Object(Y["b"])(["allTagsByCategory"])),{},{sortedCategories:function(){return Object.keys(this.allTagsByCategory).sort()},selectedTagIds:function(){return this.selectedTags.reduce((function(t,e){return t[e.id]=!0,t}),{})}}),methods:{addTag:function(t){this.selectedTagIds[t.id]||this.$emit("change",[].concat(Object(_["a"])(this.selectedTags),[t]))},removeTag:function(t){this.selectedTagIds[t.id]&&this.$emit("change",Object(_["a"])(this.selectedTags.filter((function(e){return e.id!==t.id}))))},handleClick:function(t){this.disabled||(this.selectedTagIds[t.id]?(this.removeTag(t),this.$emit("remove",t)):(this.addTag(t),this.$emit("add",t)))}},render:function(){var t=this,e=arguments[0];return e("div",{class:{"filter-list":!0,disabled:this.disabled}},[this.sortedCategories.map((function(n){return[e("div",{class:"tag-bucket-title"},[n]),e(jt,{class:"filter-bucket"},[t.allTagsByCategory[n].map((function(n){return e(St,{attrs:{tag:n,selected:t.selectedTagIds[n.id]},on:{click:function(){return t.handleClick(n)}}})}))])]}))])}},$t=It,Rt=(n("2100"),Object(nt["a"])($t,f,m,!1,null,"40bf25f5",null)),qt=Rt.exports,Pt=(n("fb6a"),n("3835")),Ut=n("b85c"),Ct=0,Bt={Enter:!0,Comma:!0,Tab:!0},Dt={name:"TagInput",props:{tags:{type:Array,required:!0},placeholder:{type:String,default:"Enter tags..."},disabled:{type:Boolean,default:!1}},data:function(){return{tagSearch:"",hints:[],highlightedHint:Ct,inputFocused:!0,lastKeydown:!1,lastLength:0,clickingHint:!1}},computed:{sanitizedSearch:function(){return V.sanitizeForSearch(this.tagSearch)},showHint:function(){return this.inputFocused||this.clickingHint},selectedTagIds:function(){return this.tags.reduce((function(t,e){return t[e.id]=!0,t}),{})}},watch:{tagSearch:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.sanitizedSearch){e.next=7;break}return e.next=3,t.$parse.Cloud.run("tagHint",{fragment:t.sanitizedSearch,exclude:Object.keys(t.selectedTagIds)});case 3:t.hints=e.sent,t.highlightedHint=Ct,e.next=8;break;case 7:t.hints=[];case 8:case"end":return e.stop()}}),e)})))()}},methods:{addTag:function(t){this.selectedTagIds[t.id]||this.$emit("change",[].concat(Object(_["a"])(this.tags),[t]))},removeTag:function(t){this.selectedTagIds[t.id]&&this.$emit("change",Object(_["a"])(this.tags.filter((function(e){return e.id!==t.id}))))},highlightSubstring:function(t,e){for(var n=t.toLowerCase(),r=e.charAt(0),a=e.charAt(e.length-1),i=[],s=0;s<n.length;s++)n[s]===r&&i.push(s);for(var o=[],c=0;c<n.length;c++)n[c]===a&&o.push(c);for(var u=i[0],l=o[0],d=0,h=i;d<h.length;d++){var g,p=h[d],f=Object(Ut["a"])(o);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(m>=p){if(m+1-p===e.length){u=p,l=m;break}m+1-p>e.length&&m-p<l-u&&(u=p,l=m)}}}catch(b){f.e(b)}finally{f.f()}}return[t.slice(0,u),t.slice(u,l+1),t.slice(l+1)]},handleHintClick:function(t){this.addTag(t),this.$emit("add",t),this.tagSearch=""},handleKeyup:function(t){var e=t.code;Bt[e]&&this.hints.length>0?(this.addTag(this.hints[this.highlightedHint]),this.$emit("add",this.hints[this.highlightedHint]),this.tagSearch=""):"Backspace"===e&&!this.tagSearch&&this.tags.length>0?this.lastKeydown===e&&this.lastLength>this.tagSearch?this.lastKeydown===e&&(this.lastLength=0):(this.removeTag(this.tags[this.tags.length-1]),this.$emit("remove",this.tags[this.tags.length-1])):"ArrowUp"===e?this.highlightedHint>0?this.highlightedHint--:-1===this.highlightedHint&&(this.highlightedHint=this.hints.length-1):"ArrowDown"===e&&this.highlightedHint<this.hints.length-1&&this.highlightedHint++},handleKeydown:function(t){Bt[t.code]&&t.preventDefault(),"Backspace"!==this.lastKeydown&&(this.lastLength=this.tagSearch.length),this.lastKeydown=t.code}},render:function(){var t=this,e=arguments[0];return e("div",{class:{"tag-input-container":!0,"input-focused":this.inputFocused,"no-tags":this.showHint&&0===this.tags.length&&0!==this.tagSearch.length,disabled:this.disabled},on:{click:function(){return t.$refs.input.focus()}}},[this.tags.map((function(n){return e(St,{attrs:{tag:n,selected:!0,removable:!t.disabled},on:{remove:function(){t.disabled||t.removeTag(n),t.$emit("remove",n)}}})})),e("div",{class:{"hint-anchor":!0,hide:this.disabled}},[e("input",{ref:"input",class:"tag-input",attrs:{placeholder:this.placeholder,autofocus:!0,tabindex:"0",disabled:this.disabled},domProps:{value:this.tagSearch},on:{input:function(e){t.tagSearch=e.target.value},keyup:this.handleKeyup,keydown:this.handleKeydown,focus:function(){t.inputFocused=!0},blur:function(){t.inputFocused=!1}}}),this.tagSearch.length>0&&this.showHint?e("div",{class:"hint-container"},[this.hints.length>0?this.hints.map((function(n,r){var a=t.highlightSubstring(n.label,t.sanitizedSearch),i=Object(Pt["a"])(a,3),s=i[0],o=i[1],c=i[2];return e("div",{class:{hint:!0,highlighted:t.highlightedHint===r},on:{click:function(){return t.handleHintClick(n)},mouseenter:function(){t.highlightedHint=r},mousedown:function(e){e.preventDefault(),t.clickingHint=!0},mouseup:function(){t.clickingHint=!1},touchstart:function(){t.clickingHint=!0,t.highlightedHint=r},touchend:function(){t.clickingHint=!1}}},[s,e("b",[o]),c])})):e("div",{class:"hint"},[" No tags found "])]):null])])}},Ht=Dt,Ft=(n("e0b7"),Object(nt["a"])(Ht,b,v,!1,null,"6602e668",null)),zt=Ft.exports,Lt={name:"ProductResult",props:{product:{type:Object,required:!0}},render:function(){var t=this,e=arguments[0];return e("router-link",{class:"product-result",attrs:{to:{name:"product",params:{id:this.product.id}}}},[e("img",{class:{"result-image":!0,placeholder:!this.product.thumbnail},attrs:{src:this.product.thumbnail?this.product.thumbnail.url():"/img-placeholder.png"}}),e("div",{class:"result-name"},[this.product.name," ",this.product.approved?null:e("span",{class:"approval"},["[ NOT APPROVED ]"])]),e(jt,{class:"result-tags"},[this.product.tags.map((function(n){return e(St,{attrs:{tag:n},on:{click:function(e){e.preventDefault(),t.$emit("click",n)}}})}))])])}},Mt=Lt,Kt=(n("e284"),Object(nt["a"])(Mt,y,w,!1,null,"7fcf1267",null)),Et=Kt.exports,Qt=",",Nt={name:"Search",data:function(){return{queryTags:[],loading:!1,results:[],total:0,onlyUnapproved:!1}},computed:Object(X["a"])(Object(X["a"])(Object(X["a"])({},Object(Y["c"])(["loggedIn"])),Object(Y["b"])(["allTagsByCategory","isPrivileged"])),{},{selectedTagIds:function(){return this.queryTags.reduce((function(t,e){return t[e.id]=!0,t}),{})},showUnapprovedButton:function(){return this.onlyUnapproved||this.isPrivileged&&0===this.queryTags.length}}),watch:{queryTags:function(){this.update()},isPrivileged:function(t){t||this.getResults(!0)},loggedIn:function(){this.getResults(!0)}},created:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("q"in t.$route.query)){e.next=12;break}return e.prev=1,n=Object(_["a"])(new Set(t.$route.query.q.split(Qt).filter((function(t){return t})))),e.next=5,Promise.all(n.map((function(e){var n=new t.$parse.Query(E);return n.get(e)})));case 5:r=e.sent,t.queryTags=r,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error(e.t0);case 12:t.update();case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},methods:{update:function(){var t=this.queryTags.map((function(t){return t.id})).join(Qt);(this.$route.query.q||"")!==t?this.queryTags.length>0?this.$router.replace({query:{q:t}}):this.$router.replace({query:{}}):"q"in this.$route.query&&!this.$route.query.q&&this.$router.replace({query:{}}),this.getResults(!0)},getResults:function(){var t=arguments,e=this;return Object(Z["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],e.loading){n.next=18;break}return e.loading=!0,n.prev=3,n.next=6,e.$parse.Cloud.run("search",{tags:Object.keys(e.selectedTagIds),skip:r?0:e.results.length,onlyUnapproved:e.onlyUnapproved});case 6:a=n.sent,i=a.count,s=a.results,e.total=i,e.results=r?s:[].concat(Object(_["a"])(e.results),Object(_["a"])(s)),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](3),console.error(n.t0),e.error=!0;case 17:e.loading=!1;case 18:case"end":return n.stop()}}),n,null,[[3,13]])})))()},addQueryTag:function(t){this.loading||this.selectedTagIds[t.id]||(this.queryTags=[].concat(Object(_["a"])(this.queryTags),[t]))},removeQueryTag:function(t){!this.loading&&this.selectedTagIds[t.id]&&(this.queryTags=Object(_["a"])(this.queryTags.filter((function(e){return e.id!==t.id}))))},toggleQueryTag:function(t){this.selectedTagIds[t.id]?this.removeQueryTag(t):this.addQueryTag(t)},setQueryTag:function(t){this.loading||(this.queryTags=[t])},handleClear:function(){this.loading||(this.queryTags=[])},handleOnlyUnapprovedToggle:function(){this.onlyUnapproved=!this.onlyUnapproved,this.getResults(!0)}},render:function(){var t=this,e=arguments[0];return e(yt,{on:{click:this.handleClear}},[e(qt,{slot:"left",attrs:{selectedTags:this.queryTags},on:{remove:this.removeQueryTag,add:this.addQueryTag}}),e("div",{class:{results:!0,loading:this.loading}},[e(zt,{attrs:{placeholder:"Filter by tags...",tags:this.queryTags},on:{remove:this.removeQueryTag,add:this.addQueryTag}}),e("div",{class:"intermediate-container"},[e("div",{class:"status-text"},[this.loading?"Loading...":"Showing ".concat(this.results.length," of ").concat(this.total," results")]),e("div",{class:"buttons"},[e(dt,{class:{hide:!(this.queryTags.length>0)},on:{click:this.handleClear},attrs:{disabled:0===this.queryTags.length,label:"Clear filters"}}),e(dt,{class:{hide:!this.showUnapprovedButton},on:{click:this.handleOnlyUnapprovedToggle},attrs:{label:"Unapproved",color:"red"}})])]),this.results.length>0?e("div",{class:"results-table"},[this.results.map((function(n){return e(Et,{attrs:{product:n},on:{click:function(e){return t.addQueryTag(e)}}})})),e(dt,{class:{"load-button":!0,hide:this.results.length===this.total},attrs:{label:"Load more",size:"medium",disabled:this.loading},on:{click:this.getResults}})]):e("div",{class:"no-results"},[e("div",["No results"])])])])}},_t=Nt,Gt=(n("e8a6"),Object(nt["a"])(_t,k,O,!1,null,"2b4b5e4b",null)),Wt=Gt.exports,Jt=(n("4160"),n("159b"),{name:"ProductTitle",props:{editing:{type:Boolean,required:!0},title:{type:String,required:!0}},render:function(){var t=this,e=arguments[0];return this.editing?e("input",{class:"title-input",domProps:{value:this.title},on:{input:function(e){return t.$emit("change",e.target.value)}},attrs:{placeholder:"Add name...",autofocus:!0,tabindex:"0"}}):e("div",{class:"title-display"},[this.title])}}),Vt=Jt,Zt=(n("efd7"),Object(nt["a"])(Vt,j,x,!1,null,"581c4bfa",null)),Xt=Zt.exports,Yt={name:"ProductUrl",props:{editing:{type:Boolean,required:!0},url:{type:String,required:!0}},data:function(){return{}},computed:{},methods:{},render:function(){var t=this,e=arguments[0];return this.editing?e("input",{class:"url-input",domProps:{value:this.url},on:{input:function(e){return t.$emit("change",e.target.value)}},attrs:{placeholder:"Add URL (vendor site, Deskthority wiki, GB, IC, etc.)...",tabindex:"0"}}):e("a",{class:"url-display",attrs:{href:this.url,target:"_blank"}},[this.url])}},te=Yt,ee=(n("0f2a"),Object(nt["a"])(te,T,A,!1,null,"0a95832d",null)),ne=ee.exports,re=(n("a630"),n("a434"),n("b680"),{name:"ProductImages",props:{editing:{type:Boolean,required:!0},images:{type:Array,required:!0}},data:function(){return{imageArray:[],uploaded:[],isDraggingOver:!1}},computed:{allUploaded:function(){return this.imageArray.every((function(t){return 1===t.progress}))},changeable:function(){return this.editing&&this.allUploaded}},watch:{images:{immediate:!0,handler:function(){this.imageArray=this.images.map((function(t){return{url:t.url(),progress:1,completed:!0}})),this.uploaded=[]}},uploaded:function(){this.allUploaded&&this.uploaded.length>0&&this.$emit("change",[].concat(Object(_["a"])(this.images),Object(_["a"])(this.uploaded)))}},methods:{handleFileUpload:function(t){var e=this;return Object(Z["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.length>0)){n.next=12;break}return a=Array.from(t),e.clearFileInput(),i=a.map(function(){var t=Object(Z["a"])(regeneratorRuntime.mark((function t(n){var r,a,i,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDataUrl(n);case 2:return r=t.sent,a={progress:0,url:r},e.imageArray.push(a),i=n.name.split(".").pop(),s="image.".concat(i),t.next=9,V.compress(n,i);case 9:return o=t.sent,c=new e.$parse.File(s,o),t.abrupt("return",c.save({progress:function(t,n,r,i){var s=i.type;"upload"===s&&null!==t&&e.$set(a,"progress",t)}}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.t0=(r=e.uploaded).push,n.t1=r,n.t2=_["a"],n.next=9,Promise.all(i);case 9:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.t0.apply.call(n.t0,n.t1,n.t4);case 12:case"end":return n.stop()}}),n)})))()},clearFileInput:function(){this.$refs.fileInput.value=null},getDataUrl:function(t){var e=new FileReader;return new Promise((function(n,r){e.readAsDataURL(t),e.onload=function(){n(e.result)},e.onerror=function(t){return r(t)}}))},remove:function(t){if(this.changeable){var e=Object(_["a"])(this.images);e.splice(t,1),this.$emit("change",e)}},reorder:function(t,e){if(t!==e){var n=Object(_["a"])(this.images);n.splice.apply(n,[e,0].concat(Object(_["a"])(n.splice(t,1)))),this.$emit("change",n)}}},render:function(){var t=this,e=arguments[0];return this.editing?e("div",{class:"images-container editing"},[e("label",{class:"image-upload",attrs:{for:"image-file-input"},on:{dragover:function(t){return t.preventDefault()},dragenter:function(t){return t.preventDefault()},drop:function(e){e.preventDefault(),e.dataTransfer.files.length&&t.handleFileUpload(e.dataTransfer.files)}}},[e("div",{class:"upload-prompt"},["Click to upload"]),e("div",["or"]),e("div",["Drag files here"])]),this.imageArray.map((function(n,r){return e("div",{attrs:{id:r,draggable:t.changeable},class:{"image-container":!0,draggable:t.changeable},on:{dragstart:function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",t.target.id)},dragover:function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"},drop:function(e){e.preventDefault(),t.reorder(e.dataTransfer.getData("text/plain"),r)}}},[e("img",{class:"image",attrs:{src:n.url,draggable:!1}}),e("div",{class:{"remove-button":!0,disabled:!t.changeable},on:{click:function(){return t.remove(r)}}},["✕"]),e("div",{class:{"progress-bar-container":!0,hide:1===n.progress}},[e("div",{class:"progress-background"},["Uploading... (",(100*n.progress).toFixed(),"%)"]),e("div",{class:"progress",style:"width: ".concat(100*n.progress,"%")},["Uploading... (",(100*n.progress).toFixed(),"%)"])])])})),e("input",{attrs:{id:"image-file-input",type:"file",accept:"image/*",multiple:!0},ref:"fileInput",class:"file-input",on:{change:function(e){return t.handleFileUpload(e.target.files)}}})]):e("div",{class:"images-container display"},[this.images.map((function(t){return e("img",{class:"image",attrs:{src:t.url(),draggable:!1}})}))])}}),ae=re,ie=(n("81f2"),n("36f7"),Object(nt["a"])(ae,S,I,!1,null,"1291cba4",null)),se=ie.exports,oe=["Missing tags","Incorrect tags","Inaccurate information","Inappropriate content","Other"],ce={name:"FlagModal",props:{product:{type:Object,required:!0}},data:function(){return{reason:"",tags:[],categoryIndex:-1,disableSubmit:!1}},computed:{category:function(){return this.categoryIndex>=0?oe[this.categoryIndex]:""},tagInputPlaceholder:function(){return 0===this.tags.length?0===this.categoryIndex?"Enter the missing tags (Optional)":"Enter the incorrect tags (Optional)":"Add tags..."},submitDisabled:function(){return this.disablSubmit||-1===this.categoryIndex}},methods:{save:function(){var t=this;this.disableSubmit=!0;var e=new J(this.product);e.reason=this.reason,e.category=this.category,e.tags=this.tags,W.current()&&W.current(),e.save().then((function(){return t.$emit("close")}))}},render:function(){var t=this,e=arguments[0];return e("div",{class:"flag-modal-content"},[e("div",{class:"title"},["What's wrong?"]),e("select",{class:{"category-select":!0,"category-invalid":!this.category},on:{change:function(e){t.categoryIndex=parseInt(e.target.value,10)}}},[e("option",{domProps:{value:-1,selected:-1===this.categoryIndex}},["Select category"]),oe.map((function(n,r){return e("option",{domProps:{value:r,selected:t.categoryIndex===r}},[n])}))]),e(zt,{class:{"flag-tags":!0,hide:0!==this.categoryIndex&&1!==this.categoryIndex},attrs:{placeholder:this.tagInputPlaceholder,tags:this.tags},on:{change:function(e){t.tags=e}}}),e("textarea",{class:"reason-input",domProps:{value:this.reason},on:{input:function(e){t.reason=e.target.value}},attrs:{rows:3,placeholder:"Description of the issue (Optional)",inputmode:"text"}}),e(dt,{attrs:{label:"Submit",size:"fit medium",disabled:this.submitDisabled},on:{click:this.save}})])}},ue=ce,le=(n("024a"),n("f434"),Object(nt["a"])(ue,$,R,!1,null,"7853629c",null)),de=le.exports,he=function(){return{editing:!1,product:new G,tags:[],name:"",url:"",images:[],approved:!1,saving:!1}},ge={name:"ProductPage",data:he,computed:Object(X["a"])(Object(X["a"])(Object(X["a"])({},Object(Y["c"])(["isAdmin"])),Object(Y["b"])(["allTagsByCategory","isPrivileged"])),{},{pageState:function(){return this.editing?"edit":this.$route.name},id:function(){return this.$route.params.id},editable:function(){return this.isAdmin||this.editing||"submit"===this.pageState},saveable:function(){var t=this;if(this.saving)return!1;try{if(this.name!==this.product.name)return!0;if(this.url!==this.product.url&&this.url)return!0;if(this.tags.length!==this.product.tags.length||this.product.tags.some((function(e,n){return e&&t.tags[n]&&e.label!==t.tags[n].label})))return!0;if(this.images.length!==this.product.images.length||this.images.some((function(e,n){return!(e&&t.product.images[n]&&e.url&&t.product.images[n].url&&e.url()===t.product.images[n].url())})))return!0}catch(e){console.error(e)}return!1},selectedTagIds:function(){return this.tags.reduce((function(t,e){return t[e.id]=!0,t}),{})}}),watch:{id:{immediate:!0,handler:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.id){e.next=19;break}return e.prev=1,n=new t.$parse.Query(G),n.include("tags"),e.next=6,n.get(t.id);case 6:t.product=e.sent,document.title="".concat(t.product.name," - Keebhunter"),t.tags=t.product.tags,t.name=t.product.name,t.url=t.product.url,t.images=t.product.get("images"),t.approved=t.product.approved,t.editing=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),t.$router.push({name:"search"});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))()}},pageState:{immediate:!0,handler:function(){var t=this;if("submit"===this.pageState){var e=he();Object.keys(e).forEach((function(n){t[n]=e[n]})),this.editing=!0}}}},methods:{handleFlag:function(){this.$modal.show(de,{product:this.product},{width:400,height:"auto",classes:"flag-modal"})},handleApprove:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.saving){e.next=13;break}return t.saving=!0,e.prev=2,t.product.approved?t.product.approved=!1:t.product.approved=!0,e.next=6,t.product.save();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.error(e.t0);case 11:t.approved=t.product.approved,t.saving=!1;case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()},handleEdit:function(){this.editing=!0},handleCancel:function(){this.editing=!1,"submit"===this.pageState?this.$router.push({name:"search"}):(this.name=this.product.name,this.tags=this.product.tags,this.url=this.product.url,this.images=this.product.images)},handleSave:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.saveable){e.next=28;break}return t.saving=!0,e.prev=2,t.product.name=t.name,t.product.tags=t.tags,t.product.url=t.url,t.product.images=t.images,W.current()&&(t.product.submittedBy=W.current()),e.prev=8,e.next=11,V.thumbnailify(t.images[0].url());case 11:return n=e.sent,r=new t.$parse.File("thumb.webp",n),e.next=15,r.save();case 15:t.product.thumbnail=r,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](8),console.error(e.t0);case 21:t.product.save().then((function(){t.editing=!1,t.id||t.$router.push({name:"product",params:{id:t.product.id}})})).catch((function(t){return alert(t.message)})).finally((function(){t.saving=!1})),e.next=28;break;case 24:e.prev=24,e.t1=e["catch"](2),alert(e.t1.message),t.saving=!1;case 28:case"end":return e.stop()}}),e,null,[[2,24],[8,18]])})))()},handleDelete:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAdmin&&confirm('Are you sure you want to delete "'.concat(t.product.name,'"'))&&t.product.destroy().then((function(){return t.$router.push({name:"search"})})).catch((function(t){return alert(t.message)}));case 1:case"end":return e.stop()}}),e)})))()}},render:function(){var t=this,e=arguments[0];return e(yt,[e(qt,{slot:"left",attrs:{selectedTags:this.tags,disabled:!this.editing},on:{change:function(e){t.tags=e}}}),e("div",{class:{"product-container":!0,editing:this.editing}},[e(Xt,{class:"product-title",attrs:{editing:this.editing,title:this.name},on:{change:function(e){t.name=e}}}),e(ne,{class:"product-url",attrs:{editing:this.editing,url:this.url},on:{change:function(e){t.url=e}}}),e("div",{class:"buttons"},[e(dt,{class:{"save-button":!0,hide:!this.editable||!this.editing},on:{click:this.handleSave},attrs:{disabled:!this.saveable,label:"Save",size:"medium"}}),e(dt,{class:{"cancel-button":!0,hide:!this.editable||!this.editing},on:{click:this.handleCancel},attrs:{label:"Cancel",size:"medium"}}),e(dt,{class:{"edit-button":!0,hide:!this.editable||this.editing},on:{click:this.handleEdit},attrs:{label:"Edit",size:"medium"}}),e(dt,{class:{"approve-button":!0,hide:this.editing||!this.isPrivileged},on:{click:this.handleApprove},attrs:{label:this.approved?"Reject":"Approve",size:"medium",color:"red"}}),e(dt,{class:{"flag-button":!0,hide:this.editing||this.isPrivileged},on:{click:this.handleFlag},attrs:{label:"Flag",size:"medium",color:"red"}})]),e(zt,{class:"product-tags",attrs:{placeholder:this.editing?"Add tags...":0===this.tags.length?"No tags":"",tags:this.tags,disabled:!this.editing},on:{change:function(e){t.tags=e}}}),e(se,{class:"product-images",attrs:{editing:this.editing,images:this.images},on:{change:function(e){t.images=Object(_["a"])(e)}}})]),e(dt,{class:{"delete-button":!0,hide:!(this.isAdmin&&this.editing&&"submit"!==this.$route.name)},on:{click:this.handleDelete},attrs:{label:"Delete",size:"fit medium",color:"red"}})])}},pe=ge,fe=(n("f975"),Object(nt["a"])(pe,q,P,!1,null,"72b3b206",null)),me=fe.exports,be=null,ve={name:"SuggestTag",data:function(){return{label:"",categoryIndex:-1,success:!1,disableSubmit:!1}},computed:Object(X["a"])(Object(X["a"])(Object(X["a"])({},Object(Y["c"])(["isAdmin"])),Object(Y["b"])(["allTagsByCategory"])),{},{categories:function(){return Object.keys(this.allTagsByCategory).sort()},category:function(){return this.categoryIndex>=0?this.categories[this.categoryIndex]:"new"===this.categoryIndex?"new":""},submitDisabled:function(){return!this.category||!this.label||this.label.length<2||this.disableSubmit}}),methods:{save:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.disableSubmit){e.next=9;break}return t.disableSubmit=!0,n=new E,n.label=t.label,n.category=t.category,W.current()&&(n.submittedBy=W.current()),e.next=8,n.save().then((function(){t.label="",t.categoryIndex=-1,t.success=!0,be&&clearTimeout(be),setTimeout((function(){t.success=!1}),5e3)})).catch((function(t){return alert(t.message)}));case 8:t.disableSubmit=!1;case 9:case"end":return e.stop()}}),e)})))()}},render:function(){var t=this,e=arguments[0];return e(yt,[e("div",{class:"suggestion-box"},[e("div",{class:"title"},["Suggest a new tag"]),e("input",{class:"label-input",domProps:{value:this.label},on:{input:function(e){t.label=e.target.value}},attrs:{type:"text",placeholder:"Tag name",inputmode:"text",tabindex:1}}),e("select",{class:{"category-select":!0,"category-invalid":!this.category},on:{change:function(e){t.categoryIndex=e.target.value}},attrs:{tabindex:1}},[e("option",{domProps:{value:-1,selected:-1===this.categoryIndex}},["Select category"]),this.categories.map((function(n,r){return e("option",{domProps:{value:r,selected:t.categoryIndex===r}},[n])})),e("option",{attrs:{value:"new"},domProps:{selected:"new"===this.categoryIndex}},["Other/new category"])]),e(dt,{attrs:{label:"Submit",size:"fit medium",disabled:this.submitDisabled,borderless:this.submitDisabled},on:{click:this.save}}),e("div",{class:{"success-message":!0,hide:!this.success}},["Suggestion noted. Thanks for helping out!"])])])}},ye=ve,we=(n("2f04"),Object(nt["a"])(ye,U,C,!1,null,"354a3624",null)),ke=we.exports;B["a"].use(F["a"]);var Oe="Keebhunter",je=[{path:"/",name:"search",component:Wt},{path:"/suggest-tag",name:"suggest-tag",component:ke},{path:"/submit",name:"submit",component:me},{path:"/:id",name:"product",component:me}],xe=new F["a"]({mode:"history",base:"/",routes:je});xe.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.authRequired}))&&!W.current()?n({name:"search"}):n()})),xe.afterEach((function(t){window.scrollTo(0,0),B["a"].nextTick((function(){document.title=t.meta.title||Oe}))}));var Te=xe;n("7db0"),n("2532");B["a"].use(Y["a"]);var Ae,Se,Ie=new Y["a"].Store({state:{tags:[],keyboardArt:{},tagline:"",loggedIn:!1,isAdmin:!1,isMod:!1},getters:{allTagsByCategory:function(t){return t.tags.reduce((function(t,e){return e.category in t||(t[e.category]=[]),t[e.category].push(e),t}),{})},isPrivileged:function(t){return t.isAdmin||t.isMod}},mutations:{setTags:function(t,e){var n=e.tags;t.tags=n},setTagline:function(t,e){var n=e.tagline;t.tagline=n},setKeyboardArt:function(t,e){t.keyboardArt=e},setLoggedIn:function(t,e){var n=e.loggedIn;t.loggedIn=n},setIsAdmin:function(t,e){var n=e.isAdmin;t.isAdmin=n},setIsMod:function(t,e){var n=e.isMod;t.isMod=n}},actions:{syncUserState:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=W.current(),n("setLoggedIn",{loggedIn:!!r}),a=new H.a.Query(H.a.Role),a.equalTo("users",r),e.next=7,a.find();case 7:return i=e.sent,s=i.map((function(t){return t.get("name")})),o=s.includes("admin"),o?(n("setIsAdmin",{isAdmin:!0}),n("setIsMod",{isMod:!0})):s.includes("mod")?(n("setIsAdmin",{isAdmin:!1}),n("setIsMod",{isMod:!0})):(n("setIsAdmin",{isAdmin:!1}),n("setIsMod",{isMod:!1})),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e)})))()},register:function(t,e){return Object(Z["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,a=e.username,i=e.password,s=new W,n.abrupt("return",s.register(a,i).finally((function(){return r("syncUserState")})));case 4:case"end":return n.stop()}}),n)})))()},login:function(t,e){return Object(Z["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,a=e.username,i=e.password,n.abrupt("return",W.logIn(a,i).finally((function(){return r("syncUserState")})));case 3:case"end":return n.stop()}}),n)})))()},logout:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.abrupt("return",W.logOut().finally((function(){return n("syncUserState")})).finally((function(){"search"!==Te.currentRoute.name&&Te.push({name:"search"})})));case 2:case"end":return e.stop()}}),e)})))()},getAllTags:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=new H.a.Query(E),r.equalTo("approved",!0),r.limit(200),e.next=6,r.find();case 6:return a=e.sent,n("setTags",{tags:a}),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))()},getTagline:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,H.a.Cloud.run("randomTagline");case 3:return r=e.sent,n("setTagline",{tagline:r}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getKeyboardArt:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=new H.a.Query(N),e.t0=r,e.t1=Math,e.t2=Math.random(),e.t3=Math,e.next=8,r.count();case 8:return e.t4=e.sent,e.t5=e.t3.floor.call(e.t3,e.t4),e.t6=e.t2*e.t5,e.t7=e.t1.floor.call(e.t1,e.t6),e.t0.skip.call(e.t0,e.t7),e.next=15,r.find();case 15:return a=e.sent[0],n("setKeyboardArt",{src:a.src,name:a.name,attribution:a.attribution,url:a.url}),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})))()},hydrate:function(t){return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.dispatch,n("getAllTags"),n("getTagline"),n("syncUserState");case 4:case"end":return e.stop()}}),e)})))()}}}),$e=n("1881"),Re=n.n($e),qe={name:"App",beforeCreate:function(){this.$store.dispatch("hydrate")},render:function(){var t=arguments[0];return t("div",{attrs:{id:"app"}},[t("router-view")])}},Pe=qe,Ue=(n("034f"),Object(nt["a"])(Pe,Ae,Se,!1,null,null,null)),Ce=Ue.exports;B["a"].config.productionTip=!1,H.a.serverURL="https://parseapi.back4app.com",H.a.initialize("wO7G5hWyUtPp9tl26tEYqCUKBQWNNtqtMuUOVeVH","3AbW69th3jmQifZdgXarciJwoTy6y0p8Tx1uUKl3"),H.a.Object.registerSubclass("Tagline",Q),H.a.Object.registerSubclass("KeyboardArt",N),H.a.Object.registerSubclass("Tags",E),H.a.Object.registerSubclass("Products",G),H.a.Object.registerSubclass("User",W),H.a.Object.registerSubclass("Flag",J),B["a"].prototype.$parse=H.a,B["a"].use(Re.a),new B["a"]({router:Te,store:Ie,render:function(t){return t(Ce)}}).$mount("#app")},"57ed":function(t,e,n){},6:function(t,e){},6417:function(t,e,n){},"6b6d":function(t,e,n){"use strict";n("3b80")},"6cdd":function(t,e,n){},7:function(t,e){},7050:function(t,e,n){"use strict";n("d4bb")},8:function(t,e){},"81f2":function(t,e,n){"use strict";n("5675")},8259:function(t,e,n){},"85ec":function(t,e,n){},"8b98":function(t,e,n){},9:function(t,e){},adf9:function(t,e,n){},b16e:function(t,e,n){},b37e:function(t,e,n){"use strict";n("31d4")},b80e:function(t,e,n){},c7a9:function(t,e,n){"use strict";n("6417")},cbca:function(t,e,n){},d4bb:function(t,e,n){},de42:function(t,e,n){},e0b7:function(t,e,n){"use strict";n("8b98")},e271:function(t,e,n){},e284:function(t,e,n){"use strict";n("b16e")},e8a6:function(t,e,n){"use strict";n("b80e")},efd7:function(t,e,n){"use strict";n("de42")},f434:function(t,e,n){"use strict";n("4631")},f975:function(t,e,n){"use strict";n("8259")}});
//# sourceMappingURL=app.fab7a8cd.js.map